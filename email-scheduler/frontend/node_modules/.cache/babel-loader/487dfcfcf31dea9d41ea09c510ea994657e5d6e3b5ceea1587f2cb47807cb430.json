{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sreey\\\\OneDrive\\\\Desktop\\\\New folder\\\\email-scheduler\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter, Routes, Route, Navigate, useNavigate, useLocation } from 'react-router-dom';\nimport axios from 'axios';\nimport { Toaster } from 'sonner';\nimport './App.css';\nimport './index.css';\nimport LoginPage from './pages/LoginPage';\nimport UserDashboard from './pages/UserDashboard';\nimport LoginCallback from './pages/LoginCallback';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst API = `${BACKEND_URL}/api`;\naxios.defaults.withCredentials = true;\nfunction ProtectedRoute({\n  children\n}) {\n  _s();\n  const [isAuthenticated, setIsAuthenticated] = useState(null);\n  const [user, setUser] = useState(null);\n  const navigate = useNavigate();\n  const location = useLocation();\n  useEffect(() => {\n    var _location$state;\n    if ((_location$state = location.state) !== null && _location$state !== void 0 && _location$state.user) {\n      setUser(location.state.user);\n      setIsAuthenticated(true);\n      return;\n    }\n    const checkAuth = async () => {\n      try {\n        const response = await axios.get(`${API}/auth/me`);\n        setUser(response.data);\n        setIsAuthenticated(true);\n      } catch {\n        setIsAuthenticated(false);\n        navigate('/login');\n      }\n    };\n    checkAuth();\n  }, [navigate, location]);\n  if (isAuthenticated === null) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: 40\n      },\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this);\n  }\n  return isAuthenticated ? /*#__PURE__*/React.cloneElement(children, {\n    user\n  }) : null;\n}\n_s(ProtectedRoute, \"1QDiqzS3i0bNBGl6jSqGZhopCIY=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = ProtectedRoute;\nfunction AppRouter() {\n  _s2();\n  var _location$hash;\n  const location = useLocation();\n  if ((_location$hash = location.hash) !== null && _location$hash !== void 0 && _location$hash.includes('session_id=')) {\n    return /*#__PURE__*/_jsxDEV(LoginCallback, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Routes, {\n    children: [/*#__PURE__*/_jsxDEV(Route, {\n      path: \"/login\",\n      element: /*#__PURE__*/_jsxDEV(LoginPage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 37\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/dashboard\",\n      element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n        children: /*#__PURE__*/_jsxDEV(UserDashboard, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/\",\n      element: /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/dashboard\",\n        replace: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 32\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n_s2(AppRouter, \"pkHmaVRPskBaU4tMJuJJpV42k1I=\", false, function () {\n  return [useLocation];\n});\n_c2 = AppRouter;\nexport default function App() {\n  return /*#__PURE__*/_jsxDEV(BrowserRouter, {\n    children: [/*#__PURE__*/_jsxDEV(AppRouter, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Toaster, {\n      position: \"top-right\",\n      richColors: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n}\n_c3 = App;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"ProtectedRoute\");\n$RefreshReg$(_c2, \"AppRouter\");\n$RefreshReg$(_c3, \"App\");","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Routes","Route","Navigate","useNavigate","useLocation","axios","Toaster","LoginPage","UserDashboard","LoginCallback","jsxDEV","_jsxDEV","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","API","defaults","withCredentials","ProtectedRoute","children","_s","isAuthenticated","setIsAuthenticated","user","setUser","navigate","location","_location$state","state","checkAuth","response","get","data","style","padding","fileName","_jsxFileName","lineNumber","columnNumber","cloneElement","_c","AppRouter","_s2","_location$hash","hash","includes","path","element","to","replace","_c2","App","position","richColors","_c3","$RefreshReg$"],"sources":["C:/Users/sreey/OneDrive/Desktop/New folder/email-scheduler/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  BrowserRouter,\r\n  Routes,\r\n  Route,\r\n  Navigate,\r\n  useNavigate,\r\n  useLocation,\r\n} from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { Toaster } from 'sonner';\r\nimport './App.css';\r\nimport './index.css';\r\n\r\nimport LoginPage from './pages/LoginPage';\r\nimport UserDashboard from './pages/UserDashboard';\r\nimport LoginCallback from './pages/LoginCallback';\r\n\r\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\r\nconst API = `${BACKEND_URL}/api`;\r\n\r\naxios.defaults.withCredentials = true;\r\n\r\nfunction ProtectedRoute({ children }) {\r\n  const [isAuthenticated, setIsAuthenticated] = useState(null);\r\n  const [user, setUser] = useState(null);\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    if (location.state?.user) {\r\n      setUser(location.state.user);\r\n      setIsAuthenticated(true);\r\n      return;\r\n    }\r\n\r\n    const checkAuth = async () => {\r\n      try {\r\n        const response = await axios.get(`${API}/auth/me`);\r\n        setUser(response.data);\r\n        setIsAuthenticated(true);\r\n      } catch {\r\n        setIsAuthenticated(false);\r\n        navigate('/login');\r\n      }\r\n    };\r\n\r\n    checkAuth();\r\n  }, [navigate, location]);\r\n\r\n  if (isAuthenticated === null) {\r\n    return (\r\n      <div style={{ padding: 40 }}>Loading...</div>\r\n    );\r\n  }\r\n\r\n  return isAuthenticated\r\n    ? React.cloneElement(children, { user })\r\n    : null;\r\n}\r\n\r\nfunction AppRouter() {\r\n  const location = useLocation();\r\n\r\n  if (location.hash?.includes('session_id=')) {\r\n    return <LoginCallback />;\r\n  }\r\n\r\n  return (\r\n    <Routes>\r\n      <Route path=\"/login\" element={<LoginPage />} />\r\n      <Route\r\n        path=\"/dashboard\"\r\n        element={\r\n          <ProtectedRoute>\r\n            <UserDashboard />\r\n          </ProtectedRoute>\r\n        }\r\n      />\r\n      <Route path=\"/\" element={<Navigate to=\"/dashboard\" replace />} />\r\n    </Routes>\r\n  );\r\n}\r\n\r\nexport default function App() {\r\n  return (\r\n    <BrowserRouter>\r\n      <AppRouter />\r\n      <Toaster position=\"top-right\" richColors />\r\n    </BrowserRouter>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}